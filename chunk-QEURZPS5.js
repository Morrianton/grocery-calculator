import{a as K,b as k}from"./chunk-5IH7WYOS.js";import{$ as U,A as O,I as b,V as q,W as F,X as D,Y as I,Z as T,_,aa as P,ba as E,ca as R,d as m,da as N,e as u,ea as W,f as r,fa as $,g as x,ga as G,h as L,i as H,ia as X,j as M,ja as Q,k as t,l as i,la as Y,m as d,n as V,o as p,p as z,pa as Z,q as e,qa as J,r as C,s as g,t as A,u as y,v as w,w as h,x as S,z as j}from"./chunk-WHBBSG3Z.js";import"./chunk-NNMCKKES.js";import"./chunk-QUJFQN2Y.js";import"./chunk-7TZWQKPE.js";import"./chunk-AXFZNIW6.js";import"./chunk-XSR4XQ7C.js";import"./chunk-VJC7EZAS.js";import"./chunk-ETZHRTUY.js";import"./chunk-VX3I7XZ3.js";import"./chunk-3AHCXUAT.js";import"./chunk-7FY2OE2O.js";import"./chunk-MSICAZHL.js";import"./chunk-DG4M5OXJ.js";import"./chunk-2KV73MJS.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-UDCHOYHR.js";import"./chunk-CKP3SGE2.js";import"./chunk-HLWM5G6Y.js";import"./chunk-YUYEZCUU.js";import"./chunk-EUS5S35T.js";import"./chunk-7ELYPO64.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-XO2KZLEH.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{e as v}from"./chunk-JHI3MBHO.js";var f,n1=function(){if(typeof window>"u")return new Map;if(!f){var s=window;s.Ionicons=s.Ionicons||{},f=s.Ionicons.map=s.Ionicons.map||new Map}return f},B=function(s){Object.keys(s).forEach(function(l){o1(l,s[l]);var n=l.replace(/([a-z0-9]|(?=[A-Z]))([A-Z0-9])/g,"$1-$2").toLowerCase();l!==n&&o1(n,s[l])})},o1=function(s,l){var n=n1(),o=n.get(s);o===void 0?n.set(s,l):o!==l&&console.warn('[Ionicons Warning]: Multiple icons were mapped to name "'.concat(s,'". Ensure that multiple icons are not mapped to the same icon name.'))};var a1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M256 112v288M400 256H112' class='ionicon-fill-none ionicon-stroke-width'/></svg>";var s1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M384 224v184a40 40 0 01-40 40H104a40 40 0 01-40-40V168a40 40 0 0140-40h167.48' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path d='M459.94 53.25a16.06 16.06 0 00-23.22-.56L424.35 65a8 8 0 000 11.31l11.34 11.32a8 8 0 0011.34 0l12.06-12c6.1-6.09 6.67-16.01.85-22.38zM399.34 90L218.82 270.2a9 9 0 00-2.31 3.93L208.16 299a3.91 3.91 0 004.86 4.86l24.85-8.35a9 9 0 003.93-2.31L422 112.66a9 9 0 000-12.66l-9.95-10a9 9 0 00-12.71 0z'/></svg>";var t1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-miterlimit='10' d='M80 112h352' class='ionicon-stroke-width'/><path d='M192 112V72h0a23.93 23.93 0 0124-24h80a23.93 23.93 0 0124 24h0v40M256 176v224M184 176l8 224M328 176l-8 224' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>";function l1(s,l){if(s&1){let n=V();t(0,"ion-item-sliding")(1,"ion-item")(2,"ion-label")(3,"h2"),e(4),i(),t(5,"p"),e(6),i(),t(7,"p"),e(8),w(9,"number"),i()(),t(10,"ion-note",8),e(11),i()(),t(12,"ion-item-options",9)(13,"ion-item-option",10),p("click",function(){let a=m(n).$implicit,c=z();return u(c.editItem(a))}),d(14,"ion-icon",11),i(),t(15,"ion-item-option",1),p("click",function(){let a=m(n).$implicit,c=z();return u(c.deleteItem(a))}),d(16,"ion-icon",12),i()()()}if(s&2){let n=l.$implicit;r(4),C(n.name),r(2),A("",n.quantity," ",n.unit," @ $",n.price,"/",n.unit),r(2),g("Total: $",h(9,9,n.price*n.quantity,"1.2-2")),r(2),M("color",y(n.isFood?"success":"warning")),r(),g(" ",n.isFood?"Food":"Non-food"," ")}}var k1=(()=>{let l=class l{constructor(o,a,c){this.modalCtrl=o,this.groceryService=a,this.alertCtrl=c,this.items=[],this.subtotal=0,this.foodTax=0,this.nonFoodTax=0,this.total=0,B({"trash-outline":t1,"create-outline":s1,add:a1})}ngOnInit(){this.loadItems()}loadItems(){return v(this,null,function*(){try{this.items=yield this.groceryService.getItems(),this.calculateTotals()}catch(o){console.error("Error loading items:",o)}})}calculateTotals(){this.subtotal=0,this.foodTax=0,this.nonFoodTax=0,this.items.forEach(o=>{let a=o.price*o.quantity;this.subtotal+=a,o.isFood?this.foodTax+=a*.03:this.nonFoodTax+=a*.0875}),this.total=this.subtotal+this.foodTax+this.nonFoodTax}addItem(){return v(this,null,function*(){let o=yield this.modalCtrl.create({component:k,componentProps:{mode:"add"}});return o.onDidDismiss().then(a=>{a.data&&this.loadItems()}),yield o.present()})}editItem(o){return v(this,null,function*(){let a=yield this.modalCtrl.create({component:k,componentProps:{mode:"edit",item:o}});return a.onDidDismiss().then(c=>{c.data&&this.loadItems()}),yield a.present()})}deleteItem(o){return v(this,null,function*(){yield(yield this.alertCtrl.create({header:"Confirm Delete",message:`Are you sure you want to remove ${o.name}?`,buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:()=>v(this,null,function*(){yield this.groceryService.deleteItem(o._id),this.loadItems()})}]})).present()})}clearCart(){return v(this,null,function*(){yield(yield this.alertCtrl.create({header:"Clear Cart",message:"Are you sure you want to remove all items?",buttons:[{text:"Cancel",role:"cancel"},{text:"Clear",handler:()=>v(this,null,function*(){yield this.groceryService.clearCart(),this.loadItems()})}]})).present()})}};l.\u0275fac=function(a){return new(a||l)(x(J),x(K),x(Z))},l.\u0275cmp=L({type:l,selectors:[["app-cart"]],decls:42,vars:17,consts:[["slot","end"],["color","danger",3,"click"],["name","trash-outline","slot","icon-only"],[4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],[3,"click"],["name","add"],["slot","end","color","primary"],["slot","end",3,"color"],["side","end"],["color","primary",3,"click"],["slot","icon-only","name","create-outline"],["slot","icon-only","name","trash-outline"]],template:function(a,c){a&1&&(t(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e(3,"My Cart"),i(),t(4,"ion-buttons",0)(5,"ion-button",1),p("click",function(){return c.clearCart()}),d(6,"ion-icon",2),i()()()(),t(7,"ion-content")(8,"ion-list"),H(9,l1,17,12,"ion-item-sliding",3),i(),t(10,"ion-fab",4)(11,"ion-fab-button",5),p("click",function(){return c.addItem()}),d(12,"ion-icon",6),i()()(),t(13,"ion-footer")(14,"ion-toolbar")(15,"ion-list")(16,"ion-item")(17,"ion-label"),e(18,"Subtotal:"),i(),t(19,"ion-note",0),e(20),w(21,"number"),i()(),t(22,"ion-item")(23,"ion-label"),e(24,"Food Tax (3%):"),i(),t(25,"ion-note",0),e(26),w(27,"number"),i()(),t(28,"ion-item")(29,"ion-label"),e(30,"Non-food Tax (8.75%):"),i(),t(31,"ion-note",0),e(32),w(33,"number"),i()(),t(34,"ion-item")(35,"ion-label")(36,"strong"),e(37,"Total:"),i()(),t(38,"ion-note",7)(39,"strong"),e(40),w(41,"number"),i()()()()()()),a&2&&(r(9),M("ngForOf",c.items),r(11),g("$",h(21,5,c.subtotal,"1.2-2")),r(6),g("$",h(27,8,c.foodTax,"1.2-2")),r(6),g("$",h(33,11,c.nonFoodTax,"1.2-2")),r(8),g("$",h(41,14,c.total,"1.2-2")))},dependencies:[O,S,b,U,Q,X,D,$,N,P,W,G,R,E,Y,I,T,_,F,q,j],styles:[".food-item[_ngcontent-%COMP%]{color:var(--ion-color-success)}.non-food-item[_ngcontent-%COMP%]{color:var(--ion-color-warning)}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--padding-top: 0;--padding-bottom: 0}ion-footer[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{margin:0;padding:0}"]});let s=l;return s})();export{k1 as CartPage};
